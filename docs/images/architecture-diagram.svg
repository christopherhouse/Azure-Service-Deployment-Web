<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="950" viewBox="0 0 1200 950" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradient definitions for modern look -->
    <linearGradient id="blueGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0078D4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#106EBE;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="greenGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#107C10;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0E6B0E;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="orangeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF8C00;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#E77100;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="purpleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#5C2D91;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4A235A;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="redGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#D83B01;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C53200;stop-opacity:1" />
    </linearGradient>
    
    <!-- Shadow filter -->
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="2" dy="4" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
            refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="950" fill="#F8F9FA"/>
  
  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
        font-size="24" font-weight="bold" fill="#2C3E50">
    Azure ARM Template Deployment - Architecture
  </text>

  <!-- User Browser -->
  <g id="user-browser">
    <rect x="50" y="100" width="180" height="80" rx="8" ry="8" 
          fill="url(#blueGradient)" filter="url(#shadow)"/>
    <text x="140" y="125" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="14" font-weight="bold" fill="white">👤 User Browser</text>
    <text x="140" y="145" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">Modern Web Interface</text>
    <text x="140" y="165" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">ARM Template Upload</text>
  </g>

  <!-- .NET 8 MVC Web App (Central component) -->
  <g id="webapp">
    <rect x="450" y="350" width="200" height="100" rx="8" ry="8" 
          fill="url(#greenGradient)" filter="url(#shadow)"/>
    <text x="550" y="375" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="16" font-weight="bold" fill="white">🚀 .NET 8 MVC</text>
    <text x="550" y="395" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="14" font-weight="bold" fill="white">Web Application</text>
    <text x="550" y="415" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">Hosted on Azure App Service</text>
    <text x="550" y="435" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">ARM Template Processing</text>
  </g>

  <!-- Microsoft Entra ID -->
  <g id="entra-id">
    <rect x="50" y="320" width="180" height="80" rx="8" ry="8" 
          fill="url(#blueGradient)" filter="url(#shadow)"/>
    <text x="140" y="345" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="14" font-weight="bold" fill="white">🔐 Microsoft Entra ID</text>
    <text x="140" y="365" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">OAuth 2.0 Authentication</text>
    <text x="140" y="385" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">&amp; Authorization</text>
  </g>

  <!-- Azure SignalR -->
  <g id="signalr">
    <rect x="750" y="200" width="180" height="80" rx="8" ry="8" 
          fill="url(#orangeGradient)" filter="url(#shadow)"/>
    <text x="840" y="225" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="14" font-weight="bold" fill="white">📡 Azure SignalR</text>
    <text x="840" y="245" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">Real-time Updates</text>
    <text x="840" y="265" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">Deployment Status</text>
  </g>

  <!-- Redis Cache -->
  <g id="redis">
    <rect x="750" y="320" width="180" height="80" rx="8" ry="8" 
          fill="url(#redGradient)" filter="url(#shadow)"/>
    <text x="840" y="345" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="14" font-weight="bold" fill="white">⚡ Redis Cache</text>
    <text x="840" y="365" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">Azure Management API</text>
    <text x="840" y="385" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">Response Caching</text>
  </g>

  <!-- Azure Key Vault -->
  <g id="keyvault">
    <rect x="750" y="440" width="180" height="80" rx="8" ry="8" 
          fill="url(#purpleGradient)" filter="url(#shadow)"/>
    <text x="840" y="465" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="14" font-weight="bold" fill="white">🔑 Azure Key Vault</text>
    <text x="840" y="485" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">Secrets &amp; Connection</text>
    <text x="840" y="505" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">Strings Storage</text>
  </g>

  <!-- Application Insights -->
  <g id="app-insights">
    <rect x="450" y="550" width="200" height="80" rx="8" ry="8" 
          fill="url(#blueGradient)" filter="url(#shadow)"/>
    <text x="550" y="575" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="14" font-weight="bold" fill="white">📊 Application Insights</text>
    <text x="550" y="595" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">Telemetry &amp; Monitoring</text>
    <text x="550" y="615" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">Performance Management</text>
  </g>

  <!-- Azure Resource Manager -->
  <g id="arm">
    <rect x="450" y="750" width="200" height="80" rx="8" ry="8" 
          fill="url(#greenGradient)" filter="url(#shadow)"/>
    <text x="550" y="775" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="14" font-weight="bold" fill="white">☁️ Azure Resource</text>
    <text x="550" y="795" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="14" font-weight="bold" fill="white">Manager</text>
    <text x="550" y="815" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="white">ARM Template Deployments</text>
  </g>

  <!-- Connection lines with improved font sizes -->
  
  <!-- User Browser to Web App -->
  <line x1="230" y1="140" x2="450" y2="380" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="340" y="255" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
        font-size="12" font-weight="500" fill="#444">HTTPS Requests</text>
  
  <!-- Web App to Entra ID -->
  <line x1="450" y1="370" x2="230" y2="360" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="340" y="350" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
        font-size="12" font-weight="500" fill="#444">OAuth 2.0</text>
  
  <!-- Web App to SignalR -->
  <line x1="650" y1="380" x2="750" y2="240" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="710" y="300" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
        font-size="12" font-weight="500" fill="#444">Real-time</text>
  <text x="710" y="315" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
        font-size="12" font-weight="500" fill="#444">Communication</text>
  
  <!-- Web App to Redis -->
  <line x1="650" y1="400" x2="750" y2="360" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="700" y="375" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
        font-size="12" font-weight="500" fill="#444">Caching</text>
  
  <!-- Web App to Key Vault -->
  <line x1="650" y1="420" x2="750" y2="480" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="710" y="460" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
        font-size="12" font-weight="500" fill="#444">Secret</text>
  <text x="710" y="475" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
        font-size="12" font-weight="500" fill="#444">Management</text>
  
  <!-- Web App to Application Insights -->
  <line x1="550" y1="450" x2="550" y2="550" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="570" y="500" text-anchor="start" font-family="Segoe UI, Arial, sans-serif" 
        font-size="12" font-weight="500" fill="#444">Telemetry</text>
  
  <!-- Web App to ARM -->
  <line x1="550" y1="450" x2="550" y2="750" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="570" y="600" text-anchor="start" font-family="Segoe UI, Arial, sans-serif" 
        font-size="12" font-weight="500" fill="#444">Deploy ARM</text>
  <text x="570" y="615" text-anchor="start" font-family="Segoe UI, Arial, sans-serif" 
        font-size="12" font-weight="500" fill="#444">Templates</text>

  <!-- SignalR to User Browser (real-time updates) -->
  <path d="M 750 220 Q 500 120 230 120" stroke="#666" stroke-width="2" 
        fill="none" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
  <text x="490" y="110" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
        font-size="12" font-weight="500" fill="#444">Real-time Status Updates</text>

  <!-- Legend -->
  <g id="legend">
    <rect x="980" y="100" width="200" height="220" rx="8" ry="8" 
          fill="white" stroke="#ddd" stroke-width="1" filter="url(#shadow)"/>
    <text x="1080" y="125" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="16" font-weight="bold" fill="#2C3E50">Legend</text>
    
    <line x1="995" y1="145" x2="1015" y2="145" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="1025" y="150" font-family="Segoe UI, Arial, sans-serif" 
          font-size="11" fill="#666">API Calls</text>
    
    <line x1="995" y1="165" x2="1015" y2="165" stroke="#666" stroke-width="2" 
          stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
    <text x="1025" y="170" font-family="Segoe UI, Arial, sans-serif" 
          font-size="11" fill="#666">Push Notifications</text>
    
    <rect x="995" y="185" width="15" height="15" rx="2" fill="url(#blueGradient)"/>
    <text x="1020" y="195" font-family="Segoe UI, Arial, sans-serif" 
          font-size="11" fill="#666">Authentication</text>
    
    <rect x="995" y="205" width="15" height="15" rx="2" fill="url(#greenGradient)"/>
    <text x="1020" y="215" font-family="Segoe UI, Arial, sans-serif" 
          font-size="11" fill="#666">Core Application</text>
    
    <rect x="995" y="225" width="15" height="15" rx="2" fill="url(#orangeGradient)"/>
    <text x="1020" y="235" font-family="Segoe UI, Arial, sans-serif" 
          font-size="11" fill="#666">Communication</text>
    
    <rect x="995" y="245" width="15" height="15" rx="2" fill="url(#redGradient)"/>
    <text x="1020" y="255" font-family="Segoe UI, Arial, sans-serif" 
          font-size="11" fill="#666">Caching</text>
    
    <rect x="995" y="265" width="15" height="15" rx="2" fill="url(#purpleGradient)"/>
    <text x="1020" y="275" font-family="Segoe UI, Arial, sans-serif" 
          font-size="11" fill="#666">Security &amp; Secrets</text>
    
    <rect x="995" y="285" width="15" height="15" rx="2" fill="url(#blueGradient)"/>
    <text x="1020" y="295" font-family="Segoe UI, Arial, sans-serif" 
          font-size="11" fill="#666">Monitoring</text>
  </g>

  <!-- Flow description -->
  <g id="flow-description">
    <rect x="50" y="850" width="1100" height="80" rx="8" ry="8" 
          fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
    <text x="600" y="875" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="14" font-weight="bold" fill="#2C3E50">Architecture Flow</text>
    <text x="600" y="895" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="#666">1. User uploads ARM templates via web interface</text>
    <text x="600" y="910" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="#666">2. Application authenticates with Azure AD and deploys resources via ARM</text>
    <text x="600" y="925" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" 
          font-size="12" fill="#666">3. Real-time deployment status updates sent to user via SignalR</text>
  </g>
</svg>