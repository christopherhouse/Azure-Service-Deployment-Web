{"ast":null,"code":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { createDefaultHttpClient } from \"../defaultHttpClient.js\";\nimport { createPipelineFromOptions } from \"../createPipelineFromOptions.js\";\nimport { apiVersionPolicy } from \"./apiVersionPolicy.js\";\nimport { isApiKeyCredential, isBasicCredential, isBearerTokenCredential, isOAuth2TokenCredential } from \"../auth/credentials.js\";\nimport { apiKeyAuthenticationPolicy } from \"../policies/auth/apiKeyAuthenticationPolicy.js\";\nimport { basicAuthenticationPolicy } from \"../policies/auth/basicAuthenticationPolicy.js\";\nimport { bearerAuthenticationPolicy } from \"../policies/auth/bearerAuthenticationPolicy.js\";\nimport { oauth2AuthenticationPolicy } from \"../policies/auth/oauth2AuthenticationPolicy.js\";\nlet cachedHttpClient;\n/**\n * Creates a default rest pipeline to re-use accross Rest Level Clients\n */\nexport function createDefaultPipeline() {\n  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const pipeline = createPipelineFromOptions(options);\n  pipeline.addPolicy(apiVersionPolicy(options));\n  const {\n    credential,\n    authSchemes,\n    allowInsecureConnection\n  } = options;\n  if (credential) {\n    if (isApiKeyCredential(credential)) {\n      pipeline.addPolicy(apiKeyAuthenticationPolicy({\n        authSchemes,\n        credential,\n        allowInsecureConnection\n      }));\n    } else if (isBasicCredential(credential)) {\n      pipeline.addPolicy(basicAuthenticationPolicy({\n        authSchemes,\n        credential,\n        allowInsecureConnection\n      }));\n    } else if (isBearerTokenCredential(credential)) {\n      pipeline.addPolicy(bearerAuthenticationPolicy({\n        authSchemes,\n        credential,\n        allowInsecureConnection\n      }));\n    } else if (isOAuth2TokenCredential(credential)) {\n      pipeline.addPolicy(oauth2AuthenticationPolicy({\n        authSchemes,\n        credential,\n        allowInsecureConnection\n      }));\n    }\n  }\n  return pipeline;\n}\nexport function getCachedDefaultHttpsClient() {\n  if (!cachedHttpClient) {\n    cachedHttpClient = createDefaultHttpClient();\n  }\n  return cachedHttpClient;\n}","map":{"version":3,"names":["createDefaultHttpClient","createPipelineFromOptions","apiVersionPolicy","isApiKeyCredential","isBasicCredential","isBearerTokenCredential","isOAuth2TokenCredential","apiKeyAuthenticationPolicy","basicAuthenticationPolicy","bearerAuthenticationPolicy","oauth2AuthenticationPolicy","cachedHttpClient","createDefaultPipeline","options","arguments","length","undefined","pipeline","addPolicy","credential","authSchemes","allowInsecureConnection","getCachedDefaultHttpsClient"],"sources":["/home/runner/work/Azure-Service-Deployment-Web/Azure-Service-Deployment-Web/node_modules/@typespec/ts-http-runtime/src/client/clientHelpers.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport type { HttpClient } from \"../interfaces.js\";\nimport type { Pipeline } from \"../pipeline.js\";\nimport { createDefaultHttpClient } from \"../defaultHttpClient.js\";\nimport { createPipelineFromOptions } from \"../createPipelineFromOptions.js\";\nimport type { ClientOptions } from \"./common.js\";\nimport { apiVersionPolicy } from \"./apiVersionPolicy.js\";\nimport {\n  isApiKeyCredential,\n  isBasicCredential,\n  isBearerTokenCredential,\n  isOAuth2TokenCredential,\n} from \"../auth/credentials.js\";\nimport { apiKeyAuthenticationPolicy } from \"../policies/auth/apiKeyAuthenticationPolicy.js\";\nimport { basicAuthenticationPolicy } from \"../policies/auth/basicAuthenticationPolicy.js\";\nimport { bearerAuthenticationPolicy } from \"../policies/auth/bearerAuthenticationPolicy.js\";\nimport { oauth2AuthenticationPolicy } from \"../policies/auth/oauth2AuthenticationPolicy.js\";\n\nlet cachedHttpClient: HttpClient | undefined;\n\n/**\n * Creates a default rest pipeline to re-use accross Rest Level Clients\n */\nexport function createDefaultPipeline(options: ClientOptions = {}): Pipeline {\n  const pipeline = createPipelineFromOptions(options);\n\n  pipeline.addPolicy(apiVersionPolicy(options));\n\n  const { credential, authSchemes, allowInsecureConnection } = options;\n  if (credential) {\n    if (isApiKeyCredential(credential)) {\n      pipeline.addPolicy(\n        apiKeyAuthenticationPolicy({ authSchemes, credential, allowInsecureConnection }),\n      );\n    } else if (isBasicCredential(credential)) {\n      pipeline.addPolicy(\n        basicAuthenticationPolicy({ authSchemes, credential, allowInsecureConnection }),\n      );\n    } else if (isBearerTokenCredential(credential)) {\n      pipeline.addPolicy(\n        bearerAuthenticationPolicy({ authSchemes, credential, allowInsecureConnection }),\n      );\n    } else if (isOAuth2TokenCredential(credential)) {\n      pipeline.addPolicy(\n        oauth2AuthenticationPolicy({ authSchemes, credential, allowInsecureConnection }),\n      );\n    }\n  }\n\n  return pipeline;\n}\n\nexport function getCachedDefaultHttpsClient(): HttpClient {\n  if (!cachedHttpClient) {\n    cachedHttpClient = createDefaultHttpClient();\n  }\n\n  return cachedHttpClient;\n}\n"],"mappings":"AAAA;AACA;AAIA,SAASA,uBAAuB,QAAQ,yBAAyB;AACjE,SAASC,yBAAyB,QAAQ,iCAAiC;AAE3E,SAASC,gBAAgB,QAAQ,uBAAuB;AACxD,SACEC,kBAAkB,EAClBC,iBAAiB,EACjBC,uBAAuB,EACvBC,uBAAuB,QAClB,wBAAwB;AAC/B,SAASC,0BAA0B,QAAQ,gDAAgD;AAC3F,SAASC,yBAAyB,QAAQ,+CAA+C;AACzF,SAASC,0BAA0B,QAAQ,gDAAgD;AAC3F,SAASC,0BAA0B,QAAQ,gDAAgD;AAE3F,IAAIC,gBAAwC;AAE5C;;;AAGA,OAAM,SAAUC,qBAAqBA,CAAA,EAA4B;EAAA,IAA3BC,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAyB,EAAE;EAC/D,MAAMG,QAAQ,GAAGhB,yBAAyB,CAACY,OAAO,CAAC;EAEnDI,QAAQ,CAACC,SAAS,CAAChB,gBAAgB,CAACW,OAAO,CAAC,CAAC;EAE7C,MAAM;IAAEM,UAAU;IAAEC,WAAW;IAAEC;EAAuB,CAAE,GAAGR,OAAO;EACpE,IAAIM,UAAU,EAAE;IACd,IAAIhB,kBAAkB,CAACgB,UAAU,CAAC,EAAE;MAClCF,QAAQ,CAACC,SAAS,CAChBX,0BAA0B,CAAC;QAAEa,WAAW;QAAED,UAAU;QAAEE;MAAuB,CAAE,CAAC,CACjF;IACH,CAAC,MAAM,IAAIjB,iBAAiB,CAACe,UAAU,CAAC,EAAE;MACxCF,QAAQ,CAACC,SAAS,CAChBV,yBAAyB,CAAC;QAAEY,WAAW;QAAED,UAAU;QAAEE;MAAuB,CAAE,CAAC,CAChF;IACH,CAAC,MAAM,IAAIhB,uBAAuB,CAACc,UAAU,CAAC,EAAE;MAC9CF,QAAQ,CAACC,SAAS,CAChBT,0BAA0B,CAAC;QAAEW,WAAW;QAAED,UAAU;QAAEE;MAAuB,CAAE,CAAC,CACjF;IACH,CAAC,MAAM,IAAIf,uBAAuB,CAACa,UAAU,CAAC,EAAE;MAC9CF,QAAQ,CAACC,SAAS,CAChBR,0BAA0B,CAAC;QAAEU,WAAW;QAAED,UAAU;QAAEE;MAAuB,CAAE,CAAC,CACjF;IACH;EACF;EAEA,OAAOJ,QAAQ;AACjB;AAEA,OAAM,SAAUK,2BAA2BA,CAAA;EACzC,IAAI,CAACX,gBAAgB,EAAE;IACrBA,gBAAgB,GAAGX,uBAAuB,EAAE;EAC9C;EAEA,OAAOW,gBAAgB;AACzB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}